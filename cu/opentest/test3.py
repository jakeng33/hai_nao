###### library
import sys
import os

###### main

def checkfasta3(Input,Outdir):

	### Open file

	data = open(Input)
	
	result1 = open(os.path.join(Outdir,os.path.basename('test3.fasta')),'w')
	
	result2 = open(os.path.join(Outdir,os.path.basename('test3_reverse.fasta')),'w')

	###

	reverse = {'A':'T','T':'A','G':'C','C':'G','U':'U','\n':'\n'}
	
	seqlist = [] ## use list to deal with some seq have same length
				 ## contain info dict of seq
	seq = ''
	seqlen = 0
	reseq = ''
	
	### create seq dict with element = len of seq
	for line in data :
		
		if line.startswith('>') == True :
		
			if seqlen != 0:
				## -seqlen because function sorted: short-> long
				## but we want long -> short
				seqlist.append({-seqlen:{'seq':seq,'header':header,'re':reseq}})
				
			header = line
			seqlen = 0
			reseq = ''
			seq = ''
		else :
			seq += line
			seqlen += len(line)
			for nu in line :
				reseq += reverse[nu]
	
	seqlist.append({-seqlen:{'seq':seq,'header':header,'re':reseq}}) ## last line

	### write file by sorted len of seq  

	for each in sorted(seqlist):
		result1.write(each[list(each)[0]]['header'])
		result1.write(each[list(each)[0]]['seq'])
		result2.write(each[list(each)[0]]['header'])
		result2.write(each[list(each)[0]]['re'])

###### run 

checkfasta3(*sys.argv[1:])






		
